<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="common.css">
    <script src="util.js"></script>
    <script src="prettyprint_assertions_and_pictures.js"></script>
    <script src="index.js"></script>
    <title>RAIRE Webservice Demo</title>
</head>
<body>
<h2><a href="https://www.democracydevelopers.org.au/"><img style="height:4em;" src="https://www.democracydevelopers.org.au/wp-content/uploads/2023/02/kangaroo-badge-1.png"/></a>RAIRE Webservice Demo</h2>
<p>This is a demo of RAIRE running as a webservice.</p>

<h3>Input</h3>
<p>Input is a JSON file. The default value is for the demo shown in the
    "A Guide to RAIRE" document. Choose other example <span id="EgGuideToRaire"></span> or load from file <input type="file" id="InputFile"> </p>

<textarea rows="18" cols="120" id="Input">
{
  "metadata": {
    "candidates": ["Alice", "Bob", "Chuan","Diego" ],
    "note" : "Anything can go in the metadata section. Candidates names are used below if present. "
  },
  "num_candidates": 4,
  "votes": [
    { "n": 5000, "prefs": [ 2, 1, 0 ] },
    { "n": 1000, "prefs": [ 1, 2, 3 ] },
    { "n": 1500, "prefs": [ 3, 0 ] },
    { "n": 4000, "prefs": [ 0, 3 ] },
    { "n": 2000, "prefs": [ 3 ]  }
  ],
  "winner": 2,
  "trim_algorithm": "MinimizeTree",
  "audit": { "type": "OneOnMargin", "total_auditable_ballots": 13500  }
}
</textarea><br/>

<button onclick="execute_raire()">Execute</button>

<h3>Output</h3>
<p>To observe the raw JSON, please use your browser's network traffic inspector.
This shows a human readable version of it.</p>

<div id="Output"> </div>

<h3>Explanation of why it works</h3>
<input type="checkbox" id="ShowEffectOfEachAssertionSeparately"/><label for="ShowEffectOfEachAssertionSeparately">Show effect of each assertion sequentially (can be slow)</label><br/>
<input type="checkbox" id="HideWinner"/><label for="HideWinner">Don't bother drawing the (technically unnecessary) trees for the winning candidate.</label><br/>
<div id="IfShowEffectOfEachAssertionSeparately">
    <input type="checkbox" id="ExpandAtStart"/><label for="ExpandAtStart">Expand fully all elimination orders at start</label><br/>
    <input type="checkbox" id="DrawAsText"/><label for="ExpandAtStart">Draw as text rather than trees</label><br/>
</div>

<div id="Explanation"> </div>
</body>
</html>